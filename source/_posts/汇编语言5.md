# 汇编语言第五周——传送和运算指令

## 1、数据传送指令

- 数据传送
  - 从一个位置到另一个位置
  - 计算机最基本的操作
  - 程序设计最常使用的指令
  
- 有MOV    XCHG    PUSH    POP    LEA

  ### MOV

  ![image-20210406151107023](https://i.loli.net/2021/04/06/WqHVDouLA7nB8vG.png)

  ### XCHG

  - 通用寄存器之间
  - 通用寄存器与存储器
  - **NOP指令**:实现短操作延时，临时占用代码空间

  ### LEA(Load Effective Address)

  - 地址传送指令获取存储器操作数的地址
  - 在指令执行时计算
  - 对任何存储器寻址方式都可用
  - 对存储器直接寻址建议用offset


## 2、常见语法错误

1. 双操作数必须**一致**
2. **操作数**必须有明确类型
3. 双操作数不允许都是**主存**单元
4. 不可随意操纵**专用寄存器**

## 3、堆栈

- 堆栈是一个特殊的存储区域

  - 原则：先进后出
  - 两种基本的数据传输操作：
    - PUSH：压入堆栈
    - POP：数据弹出堆栈

- 堆栈段寄存器**SS指向堆栈段的起始位置**

  ### 用到堆栈的指令

  - 堆栈操作
  - 子程序调用CALL和返回RET
  - 中断调用INT和返回IRET

  ### 堆栈应用

  - 临时存放数据
  - 实现主，子程序间传递参数
    - 利用堆栈基址指针EBP
  - 子程序的寄存器保护和恢复
  - 高级语言的临时变量

- ### PUSH和POP指令

  - PUSH指令
    - ![image-20210407105420715](https://i.loli.net/2021/04/07/Y3T9W1b8KvaiLup.png)
  - POP指令
    - ![image-20210407105628527](https://i.loli.net/2021/04/07/IVAtuypwoNsETJB.png)

## 4、状态标志

1. 作为加减运算和逻辑运算的辅助结果
2. 构成各种条件，实现程序分支

![image-20210407122805360](https://i.loli.net/2021/04/07/QbhqCHWGxncLf4d.png)

### 进位标志CF（Carry Flag）

- 当加减运算结果的最高有效位**有进位**（加法）或**借位**（减法）时，进位标志置一，**CF=1**

### 溢出标志OF（Overflow Flag）

- 有符号数加减结果有溢出，则OF= 1； 

### 零标志ZF（Zero Flag)

- **运算结果为0，ZF= 1**

### 符号标志SF（Signed Flag）

- 运算结果**最高位为1，则SF = 1**； 否则**SF = 0**

- 最高位 = 符号位 = SF

### 奇偶标志PF（Parity Flag）

- 当运算结果最低字节中**“1”的个数为0或偶数**时，pf = 1,否则为0 

### 影响状态标志的标志

- 加减运算指令，逻辑运算指令，移位指令

- 只用于影响标志的特殊指令：  **比较指令CMP**
  - 进行减法运算
  - 用于判断两个数据大小、是否相等
- 只用于影响标志的特殊指令： **测试指令TEST**
  - 进行**逻辑与**运算
  - 用于判断某位为零或为一等

## 5、算术运算类指令

- 算术运算对数据进行加减乘除
- 这是基本的数据处理方法

### 加法指令

- 加法指令ADD
- 带进位加法指令ADC
- 增量指令INC
  - INC不影响进位标志符CF外
  - 其他指令按定义影响全部状态标志位 

#### ADD指令

- 目的操作数加上源操作数，和送到目的操作数

#### SUB指令

- 减法操作
- 整数运算

#### ADC指令和SBB指令

#### INC指令和DEC指令

#### 求补指令NEG